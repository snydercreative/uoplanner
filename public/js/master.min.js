"use strict";var namespacer=function(e){var t=e.split("."),a=window;if(t.length)for(var n=0;n<t.length;n++){var l=t[n];void 0===a[l]&&(a[l]={}),a=a[l]}};namespacer("uoplanner"),uoplanner.hamburgerMenu=function(e,t){var a=function(t){var a=e(t.currentTarget),n=a.closest(".hamburger-menu"),l=n.find("nav");l.toggle(),console.log(l)},n=function(t){e(".modal-wrapper.search").addClass("active")},l=function(t){e(".modal-wrapper.search").removeClass("active")},i=function(t){var a=e("#searchBox"),n=a.val();if(!n)return void o("Please try again with some search terms.",!0);window.location="/search?q="+encodeURIComponent(n)},o=function(t){var a=e(".modal-wrapper.search .warning");a.find("p").text(t),a.slideDown(250,function(){setTimeout(function(){e(".modal-wrapper.search .warning").slideUp(250)},1500)})};return{init:function(){e(".hamburger-menu button.menu").on("click",a),e(".hamburger-menu button.search").on("click",n),e(".modal-wrapper.search .close").on("click",l),e("#searchButton").on("click",i)}}}(jQuery),$(function(){uoplanner.hamburgerMenu.init()});var skillsApp=angular.module("skillsApp",["ngTagsInput"]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]);skillsApp.factory("naughtyService",["$http",function(e){return{isNaughty:function(t,a){e.get("/api/v1/template/naughty/"+t).then(function(e){a(e.data)},function(e){console.log(e)})}}}]),skillsApp.factory("searchService",["$http","skillListService",function(e,t){return{findSkills:function(t,a){e.get("/api/v1/search/skills?q="+t).then(function(e){a(e.data)},function(e){console.log(e)})},findNames:function(t,a){e.get("/api/v1/search/names?q="+t).then(function(e){a(e.data)},function(e){console.log(e)})}}}]),skillsApp.factory("skillListService",["$http",function(e){var t=function(t){e.get("/data/skills.json").then(function(e){t(e.data.skills)},function(e){console.log(e)})};return{getAll:t,getForAutocomplete:function(e){t(function(t){var a=[];angular.foreach(t,function(e){a.push({text:e})}),e(a)})}}}]),skillsApp.factory("templateService",["$http",function(e){return{save:function(t,a,n,l){var i={skills:t,templateName:a,templateId:n};e.post("/api/v1/template/save",i).then(function(e){l(e.data)},function(e){console.log(e)})},get:function(t,a,n){e.get("/api/v1/template/get/"+t+"/"+a).then(function(e){n(e.data)},function(e){console.log(e)})}}}]),skillsApp.controller("BuildCtrl",["templateService","skillListService","naughtyService",function(e,t,a){var n=this,l=0;n.skills=[],n.templateName="",n.urlName="",n.templateId="",n.skillList=[],t.getAll(function(e){n.skillList=e});new Clipboard("#sharing button");angular.element("#sharing button").on("click",function(e){var t=angular.element(e.currentTarget);t.text("Copied!").animate({top:"-50px",opacity:0},250,function(){t.text("Copy").animate({top:0,opacity:1},250)})}),n.setSkillInput=function(e){n.skillName=e.skill,angular.element(".skill-modal .skill-list").slideUp(250)},n.displaySkillList=function(){angular.element(".skill-modal .skill-list").slideDown(250)},n.displayAddSkillModal=function(){n.skillName="",angular.element(".skill-modal").closest(".modal-wrapper").addClass("active")},n.displayTemplateNameModal=function(){angular.element(".build .name-modal").closest(".modal-wrapper").addClass("active")},n.dismissModal=function(){angular.element(".modal-wrapper.active").removeClass("active")},n.removeSkill=function(e){var t=angular.element(e.currentTarget),a=t.closest("tr"),i=t.attr("data-skill-name"),o=1*t.attr("data-skill-value");l-=o;for(var s=0;s<n.skills.length;s++)if(n.skills[s].name===i)return n.skills.splice(s,1),void a.detach()},n.addSkill=function(e){if(l+e.value>700)return void i("This would put you over the skill cap.",!0);if(!e.name||0===e.value)return void i("You must select a skill and set a value greater than 0.",!0);if(-1===n.skillList.indexOf(e.name))return void i("Please pick an actual UO skill.",!0);for(var t=0;t<n.skills.length;t++)if(n.skills[t].name===e.name)return void i("You already have that skill.",!0);n.skills.push(e),l+=e.value,angular.element(".skill-modal .skill-list").slideUp(250),n.dismissModal(),i("Your template has unsaved changes.")},n.setTemplateName=function(e){e.toLowerCase().trim().replace(/\s/g,"_").replace(/\W/g,"").replace(/_/g,"-").replace(/--/g,"-")?s(e,function(t){if(t)return void i("Please pick a different name. You know why.",!0);n.templateName=e,angular.element("#templateName").text(e),n.dismissModal(),i("Your template has unsaved changes.")}):i("You must set a valid template name",!0)},n.saveTemplate=function(){n.templateName&&n.skills.length?e.save(n.skills,n.templateName,"",function(e){n.templateId=e.templateId,n.urlName=e.urlName,i("Skill template saved!"),o(n.templateId,n.urlName)}):i("You must set a template name and add skills to save.",!1)};var i=function(e,t){var a=t?".panel > .modal-warning":"body > .warning",n=angular.element(a);n.find("p").text(e),n.slideDown(250,function(){setTimeout(function(){n.slideUp(250)},1500)})},o=function(e,t){var a=window.location.origin+"/share/"+e+"/"+t;angular.element("#sharing .link").removeClass("inactive").text(a),angular.element("#sharing button").show()},s=function(e,t){a.isNaughty(e,function(e){t(e.isNaughty)})}}]),skillsApp.controller("HomeCtrl",["$http",function(e){var t=this;t.recentData=[],e.get("/api/v1/template/recent").then(function(e){t.recentData=a(e.data)},function(e){console.log(e)});var a=function(e){for(var t=0;t<e.length;t++){var a=new Date(e[t].lastModified);e[t].lastModified=a.toLocaleDateString()+" @ "+a.toLocaleTimeString(),e[t].url="/share/"+e[t].templateId+"/"+e[t].urlName}return e}}]),skillsApp.controller("SearchBoxCtrl",["skillListService",function(e){var t=this;t.skillsForAutocomplete=[],e.getForAutocomplete(function(e){t.skillsForAutocomplete=e})}]),skillsApp.controller("SearchCtrl",["$location","searchService","skillListService",function(e,t,a){var n=this;n.searchTerms=e.search().q,n.skillResults=[],n.nameResults=[]}]),skillsApp.controller("ShareCtrl",["templateService","$location","$scope",function(e,t,a){var n=this;n.templateId=encodeURIComponent(window.location.pathname.split("/")[2]),n.urlName=encodeURIComponent(window.location.pathname.split("/")[3]),n.shareUrl=window.location.origin+"/share/"+n.templateId+"/"+n.urlName,e.get(n.templateId,n.urlName,function(e){n.skills=e.skills,n.templateName=e.name}),angular.element("#sharing button").on("click",function(e){var t=angular.element(e.currentTarget);t.text("Copied!").animate({top:"-20px",opacity:0},250,function(){setTimeout(function(){t.text("Copy").animate({top:0,opacity:1},250)},500)})})}]);